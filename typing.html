<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Typing Proposal</title>
<link rel="stylesheet" href="css/style.css">
<style>
body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100vh;
    font-family: 'Shadows Into Light', cursive;
    overflow: hidden;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    animation: bgGradient 15s infinite alternate;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

/* Animated gradient background */
@keyframes bgGradient {
    0% { background: linear-gradient(135deg, #ff9a9e, #fad0c4);}
    50% { background: linear-gradient(135deg, #fbc2eb, #a6c1ee);}
    100% { background: linear-gradient(135deg, #ff9a9e, #fad0c4);}
}

/* Typing container */
#typing-container {
    position: relative;
    text-align: center;
    color: #6a0dad;
    display: inline-block;

    font-size: clamp(2rem, 8vw, 4rem);
    font-weight: bold;
    line-height: 1.25;

    padding: clamp(16px, 4vw, 28px);
    border-radius: 25px;

    max-width: 90%;
    word-wrap: normal;
    white-space: normal;

    box-shadow: 0 0 60px rgba(255,255,255,0.4);
    background: rgba(255,255,255,0.08);

    text-shadow: 2px 2px 15px rgba(255,255,255,0.6);
}
@media (max-width: 480px) {
    #typing-container {
        font-size: 2.1rem;
        padding: 16px 18px;
        line-height: 1.2;
    }
}
#cursor {
    display: inline-block;
    width: 3px;
    height: 1em;
    margin-left: 4px;
    background-color: #fff;
    vertical-align: bottom;
    animation: blink 1s infinite;
}

@keyframes blink {
    0%,50%,100%{opacity:1;}
    25%,75%{opacity:0;}
}
#typing-container br {
    line-height: 0.9;
}

/* Next hint */
#nextHint {
    margin-top: 50px;
    z-index: 2;
}
#nextText {
    font-size: 1.5rem;
    color: #fff;
    display: inline-block;
    padding: 12px 25px;
    border-radius: 20px;
    background: linear-gradient(135deg, #ff9a9e, #ff70a6);
    cursor: pointer;
    animation: bounce 1.5s infinite alternate, shimmer 2s infinite;
}
@keyframes bounce {
    0% { transform: translateY(0);}
    100% { transform: translateY(-10px);}
}
@keyframes shimmer {
    0% { text-shadow: 0 0 5px #fff, 0 0 10px #ff9a9e;}
    50% { text-shadow: 0 0 15px #fff,0 0 20px #ff70a6;}
    100% { text-shadow: 0 0 5px #fff,0 0 10px #ff9a9e;}
}

/* Floating hearts & sparkles */
.floating-heart, .sparkle {
    position: absolute;
    font-size: 1.5rem;
    pointer-events: none;
    animation: floatUp 1.5s ease-out forwards;
}
@keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity:1; }
    100% { transform: translateY(-100px) scale(1.5); opacity:0;}
}
/* Cute random collage */
#photo-collage {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    display: flex;
    flex-wrap: wrap;
    padding: 18px;
    gap: 14px;
    overflow: hidden;
}

/* Invisible layout cell */
.photo-cell {
    width: 18%;
    height: 22%;
    position: relative;
}

/* Photo tile */
.photo-tile {
    position: absolute;
    inset: 12%;
    background-size: cover;
    background-position: center;

    border-radius: 22px;

    opacity: 0.32;
    box-shadow:
        0 6px 16px rgba(255,120,170,0.35);

    filter: saturate(1.15);

    transform:
        rotate(var(--rot))
        translate(var(--tx), var(--ty));

    animation: floatSoft 12s ease-in-out infinite alternate;
}

@keyframes floatSoft {
    from {
        transform:
            rotate(var(--rot))
            translate(var(--tx), var(--ty));
    }
    to {
        transform:
            rotate(calc(var(--rot) + 2deg))
            translate(calc(var(--tx) + 5px), calc(var(--ty) - 5px));
    }
}

/* Tablet */
@media (max-width: 768px) {
    .photo-cell {
        width: 22%;
        height: 20%;
    }
}

/* Mobile */
@media (max-width: 480px) {
    .photo-cell {
        width: 30%;
        height: 18%;
    }
}

/* Keep main content above collage */
#typing-container,
#nextHint {
    position: relative;
    z-index: 2;
}

</style>
</head>
<body>
<div id="photo-collage"></div>

<div id="typing-container">
    <span id="typedText"></span><span id="cursor"></span>
</div>

<div id="nextHint">
    <div id="nextText" onclick="goNext()">ðŸ’– Click here to see your surprise ðŸ’–</div>
</div>

<audio id="heartbeat" src="assets/heartbeat.mp3"></audio>
<audio id="piano" src="assets/piano.mp3" loop></audio>

<script>
const messageLines = [
    "I love you ",
    "Sanchitha ",
    "\u2764",

];
  
let index = 0;
const typedText = document.getElementById('typedText');
const heartbeat = document.getElementById('heartbeat');
const piano = document.getElementById('piano');

// Play piano softly
piano.volume = 0.25;
piano.play();

let lineIndex = 0;
let charIndex = 0;

function typeLetter(){
    if(lineIndex < messageLines.length){
        const currentLine = messageLines[lineIndex];

        if(charIndex < currentLine.length){
            const char = currentLine[charIndex];

            const span = document.createElement('span');
            span.textContent = char;
            span.style.color = `hsl(${Math.random()*40+320}, 80%, 45%)`;
            span.style.display = 'inline-block';
            span.style.transform = 'scale(0.5)';
            span.style.transition = 'transform 0.3s';

            typedText.appendChild(span);

            setTimeout(()=> span.style.transform='scale(1.2)', 50);
            setTimeout(()=> span.style.transform='scale(1)', 300);

            // Floating heart
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.innerHTML = 'ðŸ’–';
            const rect = span.getBoundingClientRect();
            heart.style.left = rect.left + rect.width/2 + 'px';
            heart.style.top = rect.top - 20 + 'px';
            document.body.appendChild(heart);
            setTimeout(()=>heart.remove(),1500);

            heartbeat.currentTime = 0;
            heartbeat.play();

            charIndex++;
            setTimeout(typeLetter, 180);

        } else {
            // Line finished â†’ move to next line
            typedText.appendChild(document.createElement('br'));
            charIndex = 0;
            lineIndex++;
            setTimeout(typeLetter, 400);
        }

    } else {
        
            const cursor = document.getElementById('cursor');
        if (cursor) cursor.remove();
        }
    }


// Start typing after short delay
setTimeout(typeLetter, 1000);

// Click sparkles anywhere
document.body.addEventListener('click', e=>{
    const sparkle = document.createElement('div');
    sparkle.className='sparkle';
    sparkle.innerText='âœ¨';
    sparkle.style.left = e.clientX + 'px';
    sparkle.style.top = e.clientY + 'px';
    document.body.appendChild(sparkle);
    setTimeout(()=>sparkle.remove(),1000);
});

// Navigate to proposal page
function goNext(){
    window.location.href='proposal.html';
}
// Floating flower petals in background
for(let i=0; i<25; i++){
    const petal = document.createElement('div');
    petal.innerText = 'ðŸŒ¸'; // you can alternate 'ðŸŒ¸' and 'ðŸ’'
    petal.style.position = 'absolute';
    petal.style.fontSize = (15 + Math.random()*25) + 'px';
    petal.style.left = Math.random()*100 + 'vw';
    petal.style.top = Math.random()*-100 + 'vh';
    petal.style.opacity = 0.7 + Math.random()*0.3;
    petal.style.pointerEvents = 'none';
    petal.style.transform = `rotate(${Math.random()*360}deg)`;
    document.body.appendChild(petal);

    // Animate falling
    const duration = 8 + Math.random()*5;
    petal.animate([
        { transform: `translateY(0) rotate(0deg)` },
        { transform: `translateY(100vh) rotate(${360 + Math.random()*360}deg)` }
    ], { duration: duration*1000, iterations: Infinity, easing: 'linear' });
}

// Interactive flower pop on click
document.body.addEventListener('click', e=>{
    const flower = document.createElement('div');
    flower.innerText = 'ðŸŒ¸';
    flower.className='sparkle';
    flower.style.left = e.clientX + 'px';
    flower.style.top = e.clientY + 'px';
    flower.style.fontSize = '20px';
    document.body.appendChild(flower);
    setTimeout(()=>flower.remove(),1500);
});
/* Cute scattered collage with gaps */
const collage = document.getElementById('photo-collage');

const photos = [
    'assets/typher1.jpg',
    'assets/typher2.jpg',
    'assets/typher3.jpg',
    'assets/typher4.jpg',
    'assets/typher5.jpg',
    'assets/typher6.jpg',
    'assets/typher7.jpg',
    'assets/typher8.jpg'
];

// Adjust density
const cols = window.innerWidth < 480 ? 3 :
             window.innerWidth < 768 ? 4 : 5;

const rows = 6;
const total = rows * cols;

for (let i = 0; i < total; i++) {
    const cell = document.createElement('div');
    cell.className = 'photo-cell';

    const tile = document.createElement('div');
    tile.className = 'photo-tile';

    tile.style.backgroundImage =
        `url(${photos[i % photos.length]})`;

    tile.style.setProperty('--rot', `${Math.random()*10 - 5}deg`);
    tile.style.setProperty('--tx', `${Math.random()*12 - 6}px`);
    tile.style.setProperty('--ty', `${Math.random()*12 - 6}px`);

    tile.style.animationDuration =
        (10 + Math.random()*6) + 's';

    cell.appendChild(tile);
    collage.appendChild(cell);
}


</script>

</body>
</html>


